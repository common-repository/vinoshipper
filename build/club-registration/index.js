(()=>{"use strict";const e=window.wp.blocks,l=window.wp.blockEditor,i=window.wp.data,s=window.wp.components;window.React;const n=window.ReactJSXRuntime,c=JSON.parse('{"UU":"vinoshipper-injector/club-registration"}');(0,e.registerBlockType)(c.UU,{edit:function({attributes:e,setAttributes:c}){var t;const{allow:a,defaultClub:d,headline:o,clubsDisplayAll:u}=e,r=null!==(t=wp.data.select("core").getSite().vs_injector_account_id)&&void 0!==t?t:null,{producer:j,availableClubs:N}=(0,i.useSelect)((e=>({...e("vsInjectorProductItemStore").getAll(),...e("vsInjectorClubsStore").getAll()})));function I(e){if(N.length>0){const l=N.find((l=>l.id===e));return null!=l?l:null}return null}function b(){return j||{id:null,name:"N/A",img:null}}return(0,n.jsxs)("div",{...(0,l.useBlockProps)(),children:[(0,n.jsxs)(l.InspectorControls,{children:[(0,n.jsxs)(s.PanelBody,{title:"Club Settings",children:[(0,n.jsx)(s.PanelRow,{children:(0,n.jsx)(s.RadioControl,{label:"Clubs to Display",selected:u,options:[{label:"All Available Clubs",value:!0},{label:"Select Club(s)",value:!1}],onChange:e=>{c("true"===e?{clubsDisplayAll:!0,allow:[]}:{clubsDisplayAll:!1})},help:(0,n.jsxs)("div",{children:["Select all or certain club(s) associated to:",(0,n.jsx)("br",{}),b().name," (#",b().id,")"]})})}),!u&&(0,n.jsx)(s.PanelRow,{children:(0,n.jsx)(s.BaseControl,{label:"Allowed Clubs",id:"allowed-clubs-control",children:N.map((e=>(0,n.jsx)(s.CheckboxControl,{label:e.name,checked:!!a.includes(e.id),onChange:l=>{const i=JSON.parse(JSON.stringify(a)),s=i.findIndex((l=>l===e.id));s>=0&&i.splice(s),l&&i.push(e.id),c({allow:i})}},e.id)))})}),(0,n.jsx)(s.PanelRow,{children:(0,n.jsx)(s.SelectControl,{label:"Default Selected Club",options:function(){const e={label:"No default club",value:null,disabled:!1};return N.length>0?[e,...N.map((e=>{const l=document.createElement("div");l.innerHTML=e.name;let i=!1;return u||(i=!a.includes(e.id)),{label:l.textContent,value:e.id,disabled:i}}))]:[e]}(),value:d,onChange:e=>{c(e?{defaultClub:parseInt(e)}:{defaultClub:null})},help:d?"The form will pre-select this club when loading.":"The user must select a club. If only one club is available, the form will pre-select that club."})})]}),(0,n.jsx)(s.PanelBody,{title:"Display",initialOpen:!1,children:(0,n.jsx)("fieldset",{children:(0,n.jsx)(s.TextControl,{label:"Change Headline",help:"When defined, overwrites the headline of club signup.",value:o,onChange:e=>{e.trim()?c({headline:e}):c({headline:null})}})})})]}),(0,n.jsx)("div",{className:"vs-injector-block-editor-content",children:(0,n.jsxs)("div",{className:"vs-injector-block-club-registration",children:[(0,n.jsxs)("div",{className:"vs-injector-block-header",children:[(0,n.jsx)("img",{src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0Ij48ZGVmcz48c3R5bGU+LmNscy0xe2ZpbGw6IzgwMzFhNzt9LmNscy0ye2ZpbGw6I2ZmZjt9LmNscy0ze2ZpbGw6dXJsKCNsaW5lYXItZ3JhZGllbnQpO308L3N0eWxlPjxsaW5lYXJHcmFkaWVudCBpZD0ibGluZWFyLWdyYWRpZW50IiB4MT0iNDEyLjM0IiB5MT0iNjgxLjYxIiB4Mj0iNjc4LjI0IiB5Mj0iNDU4LjQ5IiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjZmZmIiBzdG9wLW9wYWNpdHk9IjAuMzUiLz48c3RvcCBvZmZzZXQ9IjAuMDgiIHN0b3AtY29sb3I9IiNmZmYiIHN0b3Atb3BhY2l0eT0iMC40NiIvPjxzdG9wIG9mZnNldD0iMC4yMSIgc3RvcC1jb2xvcj0iI2ZmZiIgc3RvcC1vcGFjaXR5PSIwLjYzIi8+PHN0b3Agb2Zmc2V0PSIwLjM0IiBzdG9wLWNvbG9yPSIjZmZmIiBzdG9wLW9wYWNpdHk9IjAuNzYiLz48c3RvcCBvZmZzZXQ9IjAuNDciIHN0b3AtY29sb3I9IiNmZmYiIHN0b3Atb3BhY2l0eT0iMC44NyIvPjxzdG9wIG9mZnNldD0iMC42IiBzdG9wLWNvbG9yPSIjZmZmIiBzdG9wLW9wYWNpdHk9IjAuOTQiLz48c3RvcCBvZmZzZXQ9IjAuNzQiIHN0b3AtY29sb3I9IiNmZmYiIHN0b3Atb3BhY2l0eT0iMC45OSIvPjxzdG9wIG9mZnNldD0iMC44OSIgc3RvcC1jb2xvcj0iI2ZmZiIvPjwvbGluZWFyR3JhZGllbnQ+PC9kZWZzPjxjaXJjbGUgY2xhc3M9ImNscy0xIiBjeD0iNTEyIiBjeT0iNTEyIiByPSI1MTIiLz48cGF0aCBjbGFzcz0iY2xzLTIiIGQ9Ik01MTIuNTgsNjUxLjQyLDQwNS43NSwyNDZBNDAsNDAsMCwwLDAsMzY3LDIxNi4xNkgzMjMuNzRhNDAuMDUsNDAuMDUsMCwwLDAtMzguNjcsNTAuNUw0MjQuMjEsNzgxLjI1YTY3LjIyLDY3LjIyLDAsMCwwLDY0Ljg4LDQ5LjY3aDQ3YTY3LjE1LDY3LjE1LDAsMCwwLDUzLjUtMjYuNjFDNTUzLjQzLDgwMyw1MzQuMzcsNzM0LjkxLDUxMi41OCw2NTEuNDJaIi8+PHBhdGggY2xhc3M9ImNscy0zIiBkPSJNNzAxLjQ0LDIxNi4xNkg2NTguMTVBNDAuMDUsNDAuMDUsMCwwLDAsNjE5LjQyLDI0Nkw1MTIuNTgsNjUxLjQyYzIxLjc5LDgzLjQ5LDQwLjg1LDE1MS41Nyw3NywxNTIuODlBNjguMzIsNjguMzIsMCwwLDAsNjAxLDc4MS4yNUw3NDAuMSwyNjYuNjZBNDAuMDUsNDAuMDUsMCwwLDAsNzAxLjQ0LDIxNi4xNloiLz48L3N2Zz4K",className:"vs-icon",alt:"Vinoshipper"}),(0,n.jsx)("h2",{children:"Club Registration"})]}),r&&(0,n.jsxs)("div",{children:[(0,n.jsxs)("ul",{children:[o&&(0,n.jsxs)("li",{children:["Headline: ",`"${o}"`]}),d&&(0,n.jsxs)("li",{children:["Default Club:"," ",I(d)?.name]}),a.length>0&&(0,n.jsxs)("li",{children:["Allowed Clubs:",(0,n.jsx)("ul",{children:a.map(((e,l)=>{var i;return(0,n.jsx)("li",{children:null!==(i=I(e)?.name)&&void 0!==i?i:e},l)}))})]})]}),(0,n.jsx)("p",{children:"View page to see the fully rendered component."})]}),!r&&(0,n.jsxs)("div",{className:"vs-injector-block-error",children:[(0,n.jsx)("h3",{children:"Vinoshipper Account ID: Missing"}),(0,n.jsx)("p",{children:"Please set your Vinoshipper Account ID in the Vinoshipper settings before using any Vinoshipper blocks."})]})]})})]})}})})();